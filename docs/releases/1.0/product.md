# ClipDock 1.0 PRD（设计稿）

更新时间：2026-02-13

本文基于已完成的 MVP，定义 1.0 版本“产品内容与形态”。1.0 目标：更清晰、更克制、更像一个可长期使用的工具 App；同时为 App Store 上架做准备（不引入高风险实现）。

## 1. 1.0 产品定位

ClipDock 是一款离线工具，用于将 iPhone 相册中的视频复制到用户选择的目标目录（可为外接存储目录），并在用户确认后删除原视频以释放空间。

关键承诺：
1. 不登录、不上传、不做云端。
2. 复制失败要可解释，可重试。
3. 删除只在“迁移并校验成功”前提下可用，并且每次都需要用户确认。

## 2. 1.0 形态（你已确认）

1. 不引入 Tab，不需要 `History`，不需要 `Settings`。
2. 目标目录结构：平铺（不自动按月份创建文件夹）。
3. 批量选择规则：按月份、最大 N。
4. 迁移策略：更稳（串行）。
5. 视觉风格：干净克制。

## 3. 1.0 核心用户流程（单页 + 两个轻弹层）

单页仍以“迁移主流程”为主，但做信息密度重排，减少当前长列表造成的认知负担。

1. 选择外接目录
2. 扫描视频
3. 通过“规则选择”或“手动勾选”确定迁移集合
4. 开始迁移（串行）
5. 展示结果（成功/失败 + 失败原因列表）
6. 可选删除原视频（仅成功且校验通过的条目）

弹层 A：按月份选择（Month Picker）
1. 列出可用月份（YYYY-MM），显示每个月的视频数量（以及可选：已知大小合计）
2. 支持：选择某个月 -> 一键选中该月所有视频
3. 支持：多月叠加选择

弹层 B：最大 N 选择（Top-N Picker）
1. 输入 N（默认 20，可快速 20/50/100）
2. 选择策略（1.0 先固定为）：按“大小从大到小”取 Top N
3. 对 size 未知项的处理（1.0 规则）：
   - 未知 size 的视频不参与 Top-N 计算（避免误选），但用户仍可手动勾选

## 4. 1.0 功能范围（Must/Should）

### 4.1 Must（1.0 必须交付）
1. UI 重排为“单流程面板”
   - 顶部：目录状态 + 可写状态
   - 中部：扫描与排序（日期/大小）
   - 中部：规则选择入口（按月份、最大 N）
   - 底部：迁移与进度、删除入口、结果摘要
2. 批量选择规则（按月份、最大 N）
3. 稳定迁移（串行 + 可重试失败项）
4. 删除安全闸门（保持 MVP 的安全约束）
5. i18n（已做）：中英跟随系统

### 4.2 Should（建议 1.0 一并做）
1. 选择统计增强
   - 显示“选中数量 + 选中 size 合计（best-effort）”
2. 迁移冲突策略清晰化
   - 目标文件名冲突自动加后缀，并在结果中可见
3. 失败原因“可操作化”
   - 常见错误（权限失效、外接盘不可写、导出失败）给出下一步建议

## 5. 信息结构与文案（干净克制）

原则：
1. 少颜色、少噪声；用层级和留白做引导。
2. 删除动作永远是 secondary，迁移是 primary。
3. 失败列表默认折叠，避免“失败氛围”淹没主流程。

建议去掉（或隐藏到更弱位置）：
1. 版本号常驻展示（仅调试版显示；上架版可放在“关于弹窗”或长按标题）。

## 6. 验收标准（1.0）

功能：
1. 1500+ 视频库：扫描后首屏展示 < 3s（不要求 size 全量完成）
2. 按月份选择：选中集合与该月份视频集合一致（抽样对比 20 条）
3. Top-N：在 size 已知样本上，选中集合与排序一致（抽样对比 20 条）
4. 迁移：选中 1-10 个不同大小视频，串行迁移成功率 >= 95%（非拔盘场景）
5. 删除：仅对“最近一次迁移中迁移+校验成功”条目开放；删除后相册不可见

稳定性：
1. 外接盘拔出：迁移中断，提示明确，可重试
2. 目录权限失效：提示明确，引导重新选择目录

## 7. 取舍与风险声明（1.0）

1. 不做 History：意味着“长周期追溯”能力弱，但换来界面更克制，降低上架复杂度。
2. size 为 best-effort：iCloud-only 资产可能显示 `--`，Top-N 不包含未知 size 项，避免误选。
3. 串行优先：吞吐更低，但稳定性更好，也更符合“清理工具”的风险偏好。

